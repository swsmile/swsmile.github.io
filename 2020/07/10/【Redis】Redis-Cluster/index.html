<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link rel="dns-prefetch" href="http://swsmile.info">
  <title>ã€Cache Systemã€‘Redis Cluster | è¥¿ç»´èœ€é» çš„åšå®¢</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Redis ClusterRedis Cluster æ˜¯Redis3.0ä¹‹åï¼Œå®˜æ–¹æä¾›çš„Redisé›†ç¾¤è§£å†³æ–¹æ¡ˆï¼Œç”± Redis å®˜æ–¹å›¢é˜Ÿæ¥å®ç°ã€‚ åœ¨3.0ä¹‹å‰ä¸ºäº†è§£å†³å®¹é‡é«˜å¯ç”¨ç”¨æ–¹é¢çš„éœ€æ±‚åŸºæœ¬ä¸Šåªèƒ½é€šè¿‡å®¢æˆ·ç«¯åˆ†ç‰‡ + Redis sentinelæˆ–è€…ä»£ç†ï¼ˆtwemproxyã€codisï¼‰æ–¹æ¡ˆè§£å†³ã€‚ Redis Clusteræœ€å¤§çš„ç‰¹æ€§ï¼Œå°±æ˜¯å¯¹Redisé›†ç¾¤æä¾›äº†æ°´å¹³æ‰©å±•çš„èƒ½åŠ›ï¼ˆhorizentia">
<meta name="keywords" content="Cache System,Redis">
<meta property="og:type" content="article">
<meta property="og:title" content="ã€Cache Systemã€‘Redis Cluster">
<meta property="og:url" content="http://swsmile.info/2020/07/10/ã€Redisã€‘Redis-Cluster/index.html">
<meta property="og:site_name" content="è¥¿ç»´èœ€é» çš„åšå®¢">
<meta property="og:description" content="Redis ClusterRedis Cluster æ˜¯Redis3.0ä¹‹åï¼Œå®˜æ–¹æä¾›çš„Redisé›†ç¾¤è§£å†³æ–¹æ¡ˆï¼Œç”± Redis å®˜æ–¹å›¢é˜Ÿæ¥å®ç°ã€‚ åœ¨3.0ä¹‹å‰ä¸ºäº†è§£å†³å®¹é‡é«˜å¯ç”¨ç”¨æ–¹é¢çš„éœ€æ±‚åŸºæœ¬ä¸Šåªèƒ½é€šè¿‡å®¢æˆ·ç«¯åˆ†ç‰‡ + Redis sentinelæˆ–è€…ä»£ç†ï¼ˆtwemproxyã€codisï¼‰æ–¹æ¡ˆè§£å†³ã€‚ Redis Clusteræœ€å¤§çš„ç‰¹æ€§ï¼Œå°±æ˜¯å¯¹Redisé›†ç¾¤æä¾›äº†æ°´å¹³æ‰©å±•çš„èƒ½åŠ›ï¼ˆhorizentia">
<meta property="og:locale" content="default">
<meta property="og:image" content="https://d326g9ccfagnrm.cloudfront.net/img/assets/0*fONf9qdXjpC-b444.png">
<meta property="og:updated_time" content="2020-07-13T15:25:54.294Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ã€Cache Systemã€‘Redis Cluster">
<meta name="twitter:description" content="Redis ClusterRedis Cluster æ˜¯Redis3.0ä¹‹åï¼Œå®˜æ–¹æä¾›çš„Redisé›†ç¾¤è§£å†³æ–¹æ¡ˆï¼Œç”± Redis å®˜æ–¹å›¢é˜Ÿæ¥å®ç°ã€‚ åœ¨3.0ä¹‹å‰ä¸ºäº†è§£å†³å®¹é‡é«˜å¯ç”¨ç”¨æ–¹é¢çš„éœ€æ±‚åŸºæœ¬ä¸Šåªèƒ½é€šè¿‡å®¢æˆ·ç«¯åˆ†ç‰‡ + Redis sentinelæˆ–è€…ä»£ç†ï¼ˆtwemproxyã€codisï¼‰æ–¹æ¡ˆè§£å†³ã€‚ Redis Clusteræœ€å¤§çš„ç‰¹æ€§ï¼Œå°±æ˜¯å¯¹Redisé›†ç¾¤æä¾›äº†æ°´å¹³æ‰©å±•çš„èƒ½åŠ›ï¼ˆhorizentia">
<meta name="twitter:image" content="https://d326g9ccfagnrm.cloudfront.net/img/assets/0*fONf9qdXjpC-b444.png">
  
    <link rel="alternative" href="/atom.xml" title="è¥¿ç»´èœ€é» çš„åšå®¢" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" type="text/css" href="/./main.2d7529.css">
  <style type="text/css">
  
    #container.show {
      background: linear-gradient(200deg,#a0cfe4,#e8c37e);
    }
  </style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    // listen to any DOM change and automatically perform spacing via MutationObserver()
    pangu.autoSpacingPage();
  });
</script>
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-78769787-2', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  
<script>
var _hmt = _hmt || [];
(function() {
	var hm = document.createElement("script");
	hm.src = "https://hm.baidu.com/hm.js?4481376a6b117446f0ad6f2b9b796afc";
	var s = document.getElementsByTagName("script")[0]; 
	s.parentNode.insertBefore(hm, s);
})();
</script><!-- hexo-inject:begin --><!-- hexo-inject:end -->



</head>
</html>
<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="container" q-class="show:isCtnShow">
    <canvas id="anm-canvas" class="anm-canvas"></canvas>
    <div class="left-col" q-class="show:isShow">
      
<div class="overlay" style="background: #4d4d4d"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			<img src="/logo.jpg" class="js-avatar">
		</a>
		<hgroup>
		  <h1 class="header-author"><a href="/">è¥¿ç»´èœ€é»</a></h1>
		</hgroup>
		
		<p class="header-subtitle">ğŸ’ Software engineer | ğŸ“·Photographer | ğŸ‘¹Urban explorer</p>
		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/">ä¸»é¡µ</a></li>
	        
				<li><a href="/archives/">æ‰€æœ‰æ–‡ç« </a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
    		
    			
    			<a q-on="click: openSlider(e, 'innerArchive')" href="javascript:void(0)">Tag</a>
    			
            
    			
    			<a q-on="click: openSlider(e, 'friends')" href="javascript:void(0)">Friends</a>
    			
            
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="mail" target="_blank" href="mailto:swsmile1028@gmail.com" title="mail"><i class="icon-mail"></i></a>
		        
					<a class="github" target="_blank" href="https://github.com/swsmile" title="github"><i class="icon-github"></i></a>
		        
					<a class="linkedin" target="_blank" href="https://www.linkedin.com/in/weishi1028/" title="linkedin"><i class="icon-linkedin"></i></a>
		        
					<a class="weibo" target="_blank" href="https://weibo.com/swsmile666" title="weibo"><i class="icon-weibo"></i></a>
		        
					<a class="facebook" target="_blank" href="https://www.facebook.com/swsmile666" title="facebook"><i class="icon-facebook"></i></a>
		        
			</div>
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col" q-class="show:isShow,hide:isShow|isFalse">
      
<nav id="mobile-nav">
  	<div class="overlay js-overlay" style="background: #4d4d4d"></div>
	<div class="btnctn js-mobile-btnctn">
  		<div class="slider-trigger list" q-on="click: openSlider(e)"><i class="icon icon-sort"></i></div>
	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img src="/logo.jpg" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author js-header-author">è¥¿ç»´èœ€é»</h1>
			</hgroup>
			
			<p class="header-subtitle"><i class="icon icon-quo-left"></i>ğŸ’ Software engineer | ğŸ“·Photographer | ğŸ‘¹Urban explorer<i class="icon icon-quo-right"></i></p>
			
			
			
				
			
				
			
			
			
			<nav class="header-nav">
				<div class="social">
					
						<a class="mail" target="_blank" href="mailto:swsmile1028@gmail.com" title="mail"><i class="icon-mail"></i></a>
			        
						<a class="github" target="_blank" href="https://github.com/swsmile" title="github"><i class="icon-github"></i></a>
			        
						<a class="linkedin" target="_blank" href="https://www.linkedin.com/in/weishi1028/" title="linkedin"><i class="icon-linkedin"></i></a>
			        
						<a class="weibo" target="_blank" href="https://weibo.com/swsmile666" title="weibo"><i class="icon-weibo"></i></a>
			        
						<a class="facebook" target="_blank" href="https://www.facebook.com/swsmile666" title="facebook"><i class="icon-facebook"></i></a>
			        
				</div>
			</nav>

			<nav class="header-menu js-header-menu">
				<ul style="width: 50%">
				
				
					<li style="width: 50%"><a href="/">ä¸»é¡µ</a></li>
		        
					<li style="width: 50%"><a href="/archives/">æ‰€æœ‰æ–‡ç« </a></li>
		        
				</ul>
			</nav>
		</header>				
	</div>
	<div class="mobile-mask" style="display:none" q-show="isShow"></div>
</nav>

      <div id="wrapper" class="body-wrap">
        <div class="menu-l">
          <div class="canvas-wrap">
            <canvas data-colors="#eaeaea" data-sectionHeight="100" data-contentId="js-content" id="myCanvas1" class="anm-canvas"></canvas>
          </div>
          <div id="js-content" class="content-ll">
            <article id="post-ã€Redisã€‘Redis-Cluster" class="article article-type-post " itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      ã€Cache Systemã€‘Redis Cluster
    </h1>
  

        
        <a href="/2020/07/10/ã€Redisã€‘Redis-Cluster/" class="archive-article-date">
  	<time datetime="2020-07-10T07:47:43.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2020-07-10</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Redis-Cluster"><a href="#Redis-Cluster" class="headerlink" title="Redis Cluster"></a>Redis Cluster</h1><p>Redis Cluster æ˜¯Redis3.0ä¹‹åï¼Œå®˜æ–¹æä¾›çš„Redisé›†ç¾¤è§£å†³æ–¹æ¡ˆï¼Œç”± <code>Redis</code> å®˜æ–¹å›¢é˜Ÿæ¥å®ç°ã€‚</p>
<p>åœ¨3.0ä¹‹å‰ä¸ºäº†è§£å†³å®¹é‡é«˜å¯ç”¨ç”¨æ–¹é¢çš„éœ€æ±‚åŸºæœ¬ä¸Šåªèƒ½é€šè¿‡å®¢æˆ·ç«¯åˆ†ç‰‡ + Redis sentinelæˆ–è€…ä»£ç†ï¼ˆtwemproxyã€codisï¼‰æ–¹æ¡ˆè§£å†³ã€‚</p>
<p>Redis Clusteræœ€å¤§çš„ç‰¹æ€§ï¼Œå°±æ˜¯å¯¹Redisé›†ç¾¤æä¾›äº†æ°´å¹³æ‰©å±•çš„èƒ½åŠ›ï¼ˆhorizential scalibilityï¼‰ï¼Œå³å½“æ•´ä¸ª Redis é›†ç¾¤å‡ºç°å­˜å‚¨å®¹é‡æˆ–è€…æ€§èƒ½ bottleneck æ—¶ï¼Œä½¿ç”¨ Redis Cluster å¯ä»¥é€šè¿‡å¢åŠ æ–°çš„ master Redis nodeä»è€Œå¿«é€Ÿè§£å†³bottleneckã€‚</p>
<p>é™¤æ­¤ä¹‹å¤–ï¼ŒRedis Clusteræä¾›äº†å¼ºå¤§çš„é«˜å¯ç”¨æœºåˆ¶ï¼ˆå³ failure failoverï¼‰ã€‚å³å½“é›†ç¾¤ä¸­ä»»ä½•ä¸€ä¸ªmaster Redis nodeæ— æ³•æ­£å¸¸å·¥ä½œæ—¶ï¼ˆæ¯”å¦‚å› ä¸ºåº•å±‚ä¾èµ–çš„ç¡¬ä»¶æ•…éšœã€ç½‘ç»œé—®é¢˜ï¼‰ï¼Œå®ƒå¯¹åº”çš„ slave Redis nodeå°±ä¼šè‡ªåŠ¨ä»£æ›¿å®ƒï¼ˆå½“ç„¶ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªå‰æï¼Œæ˜¯æˆ‘ä»¬è®¾ç½®äº†slave Redis nodeï¼‰ã€‚</p>
<p>ä¸Codis å’Œ Twemproxy ä¸åŒçš„æ˜¯ï¼šRedis Clusterå¹¶éä½¿ç”¨Porxyæ¨¡å¼æ¥è¿æ¥é›†ç¾¤èŠ‚ç‚¹ï¼Œè€Œæ˜¯ä½¿ç”¨æ— ä¸­å¿ƒèŠ‚ç‚¹çš„æ¨¡å¼æ¥ç»„å»ºé›†ç¾¤ï¼ˆå³æ²¡æœ‰coordinatorï¼‰ã€‚</p>
<p><img src="https://d326g9ccfagnrm.cloudfront.net/img/assets/0*fONf9qdXjpC-b444.png" alt="Image for post"></p>
<p>Redis Clusterå®ç°åœ¨å¤šä¸ªèŠ‚ç‚¹ä¹‹é—´è¿›è¡Œæ•°æ®å…±äº«ï¼Œå³ä½¿éƒ¨åˆ†èŠ‚ç‚¹å¤±æ•ˆæˆ–è€…æ— æ³•è¿›è¡Œé€šè®¯æ—¶ï¼ŒClusterä»ç„¶å¯ä»¥ç»§ç»­å¤„ç†è¯·æ±‚ã€‚è‹¥æ¯ä¸ªä¸»èŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªä»èŠ‚ç‚¹æ”¯æŒï¼Œåœ¨ä¸»èŠ‚ç‚¹ä¸‹çº¿æˆ–è€…æ— æ³•ä¸é›†ç¾¤çš„å¤§å¤šæ•°èŠ‚ç‚¹è¿›è¡Œé€šè®¯çš„æƒ…å†µä¸‹ï¼Œ ä»èŠ‚ç‚¹æå‡ä¸ºä¸»èŠ‚ç‚¹ï¼Œå¹¶æä¾›æœåŠ¡ï¼Œä¿è¯Clusteræ­£å¸¸è¿è¡Œã€‚</p>
<a id="more"></a> 

<h2 id="Redis-Cluster-æ•°æ®åˆ†ç‰‡ï¼ˆData-Shardingï¼‰"><a href="#Redis-Cluster-æ•°æ®åˆ†ç‰‡ï¼ˆData-Shardingï¼‰" class="headerlink" title="Redis Cluster æ•°æ®åˆ†ç‰‡ï¼ˆData Shardingï¼‰"></a>Redis Cluster æ•°æ®åˆ†ç‰‡ï¼ˆData Shardingï¼‰</h2><p>Redis Clusterçš„æ•°æ®åˆ†ç‰‡æ˜¯é€šè¿‡å“ˆå¸Œæ§½ï¼ˆhash slotï¼‰å®ç°çš„ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ä¸€è‡´æ€§å“ˆå¸Œï¼Œå³ consistent hashingã€‚</p>
<p>There are 16384 hash slots in Redis Cluster, and to compute what is the hash slot of a given key, we simply take the CRC16 of the key modulo 16384.</p>
<p>Every node in a Redis Cluster is responsible for a subset of the hash slots, so for example you may have a cluster with 3 nodes, where:</p>
<ul>
<li>Node A contains hash slots from 0 to 5500.</li>
<li>Node B contains hash slots from 5501 to 11000.</li>
<li>Node C contains hash slots from 11001 to 16383.</li>
</ul>
<p>æ¯ä¸ª key å­˜æ”¾åœ¨è¿™ 16384ï¼ˆ0ï½16383ï¼‰ ä¸ªå“ˆå¸Œæ§½ä¸­çš„å…¶ä¸­ä¸€ä¸ªï¼Œæ¯ä¸ªRedis node å­˜å‚¨ä¸€éƒ¨åˆ†å“ˆå¸Œæ§½ã€‚</p>
<p>This allows to add and remove nodes in the cluster easily. For example if I want to add a new node D, I need to move some hash slot from nodes A, B, C to D. Similarly if I want to remove node A from the cluster I can just move the hash slots served by A to B and C. When the node A will be empty I can remove it from the cluster completely.</p>
<p>Because moving hash slots from a node to another does not require to stop operations, adding and removing nodes, or changing the percentage of hash slots hold by nodes, does not require any downtime.</p>
<p>Redis Cluster supports multiple key operations as long as all the keys involved into a single command execution (or whole transaction, or Lua script execution) all belong to the same hash slot. The user can force multiple keys to be part of the same hash slot by using a concept called <em>hash tags</em>.</p>
<h1 id="æ¦‚å¿µç‰¹ç‚¹"><a href="#æ¦‚å¿µç‰¹ç‚¹" class="headerlink" title="æ¦‚å¿µç‰¹ç‚¹"></a>æ¦‚å¿µç‰¹ç‚¹</h1><ul>
<li>å»ä¸­å¿ƒã€å»ä¸­é—´ä»¶ï¼Œå„èŠ‚ç‚¹å¹³ç­‰ï¼Œä¿å­˜å„è‡ªæ•°æ®å’Œé›†ç¾¤çŠ¶æ€ï¼ŒèŠ‚ç‚¹é—´æ´»è·ƒäº’è¿ã€‚</li>
<li>ä¼ ç»Ÿç”¨ä¸€è‡´æ€§å“ˆå¸Œåˆ†é…æ•°æ®ï¼Œé›†ç¾¤ç”¨å“ˆå¸Œæ§½ï¼ˆhash slotï¼‰åˆ†é…ã€‚ ç®—æ³•ä¸ºCRC16ã€‚</li>
<li>é»˜è®¤åˆ†é…16384ä¸ªslotï¼Œ ç”¨CRC16ç®—æ³•å–æ¨¡ <code>CRC16(key)%16384</code> è®¡ç®—æ‰€å±slotã€‚</li>
<li>æ¯ä¸ªä¸»èŠ‚ç‚¹å­˜å‚¨ä¸€éƒ¨åˆ†å“ˆå¸Œæ§½</li>
<li>æœ€å°‘3ä¸ªä¸»èŠ‚ç‚¹</li>
</ul>
<h1 id="ä¼˜ç‚¹å’Œä¸è¶³"><a href="#ä¼˜ç‚¹å’Œä¸è¶³" class="headerlink" title="ä¼˜ç‚¹å’Œä¸è¶³"></a>ä¼˜ç‚¹å’Œä¸è¶³</h1><p><strong>ä¼˜ç‚¹</strong></p>
<ul>
<li>å®˜æ–¹è§£å†³æ–¹æ¡ˆ</li>
<li>å¯ä»¥åœ¨çº¿æ°´å¹³æ‰©å±•ï¼ˆTwemproxyçš„ä¸€å¤§å¼Šç«¯å°±æ˜¯ä¸æ”¯æŒåœ¨çº¿æ‰©å®¹èŠ‚ç‚¹ï¼‰</li>
<li>å®¢æˆ·ç«¯ç›´è¿ï¼Œç³»ç»Ÿç“¶é¢ˆæ›´å°‘</li>
<li>æ— ä¸­å¿ƒæ¶æ„</li>
<li>æ”¯æŒæ•°æ®åˆ†ç‰‡</li>
</ul>
<p><strong>Redis Clusteré›†ç¾¤ç°å®å­˜åœ¨çš„é—®é¢˜</strong><br>å°½ç®¡å±äºæ— ä¸­å¿ƒåŒ–æ¶æ„ä¸€ç±»çš„åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œä½†ä¸åŒäº§å“çš„ç»†èŠ‚å®ç°å’Œä»£ç è´¨é‡è¿˜æ˜¯æœ‰ä¸å°‘å·®å¼‚çš„ï¼Œå°±æ¯”å¦‚Redis Clusteræœ‰äº›åœ°æ–¹çš„è®¾è®¡çœ‹èµ·æ¥å°±æœ‰ä¸€äº›â€œå¥‡è‘©â€å’Œç®€é™‹ï¼š</p>
<ul>
<li>ä¸èƒ½è‡ªåŠ¨å‘ç°ï¼šæ— Auto DiscoveryåŠŸèƒ½ã€‚é›†ç¾¤å»ºç«‹æ—¶ä»¥åŠè¿è¡Œä¸­æ–°å¢ç»“ç‚¹æ—¶ï¼Œéƒ½è¦é€šè¿‡æ‰‹åŠ¨æ‰§è¡ŒMEETå‘½ä»¤æˆ–redis-trib.rbè„šæœ¬æ·»åŠ åˆ°é›†ç¾¤ä¸­</li>
<li>ä¸èƒ½è‡ªåŠ¨Reshardingï¼šä¸ä»…ä¸è‡ªåŠ¨ï¼Œè¿Reshardingç®—æ³•éƒ½æ²¡æœ‰ï¼Œè¦è‡ªå·±è®¡ç®—ä»å“ªäº›ç»“ç‚¹ä¸Šè¿ç§»å¤šå°‘Slotï¼Œç„¶åè¿˜æ˜¯å¾—é€šè¿‡redis-trib.rbæ“ä½œ</li>
<li>ä¸¥é‡ä¾èµ–å¤–éƒ¨redis-tribï¼šå¦‚ä¸Šæ‰€è¿°ï¼Œåƒé›†ç¾¤å¥åº·çŠ¶å†µæ£€æŸ¥ã€ç»“ç‚¹åŠ å…¥ã€Reshardingç­‰ç­‰åŠŸèƒ½å…¨éƒ½æŠ½ç¦»åˆ°ä¸€ä¸ªRubyè„šæœ¬ä¸­äº†ã€‚è¿˜ä¸æ¸…æ¥šä¸Šé¢æåˆ°çš„ç¼ºå¤±åŠŸèƒ½æœªæ¥æ˜¯è¦ç»§ç»­åŠ åˆ°è¿™ä¸ªè„šæœ¬é‡Œè¿˜æ˜¯ä¼šé›†æˆåˆ°é›†ç¾¤ç»“ç‚¹ä¸­ï¼Ÿredis-tribä¹Ÿè®¸è¦å˜æˆCodisä¸­Dashboardçš„è§’è‰²</li>
<li>æ— ç›‘æ§ç®¡ç†UIï¼šå³ä¾¿æœªæ¥åŠ äº†UIï¼Œåƒè¿ç§»è¿›åº¦è¿™ç§ä¿¡æ¯åœ¨æ— ä¸­å¿ƒåŒ–è®¾è®¡ä¸­å¾ˆéš¾å¾—åˆ°</li>
<li>åªä¿è¯æœ€ç»ˆä¸€è‡´æ€§ï¼šå†™MasteræˆåŠŸåç«‹å³è¿”å›ï¼Œå¦‚éœ€å¼ºä¸€è‡´æ€§ï¼Œè‡ªè¡Œé€šè¿‡WAITå‘½ä»¤å®ç°ã€‚ä½†å¯¹äºâ€œè„‘è£‚â€é—®é¢˜ï¼Œç›®å‰Redisæ²¡æä¾›ç½‘ç»œæ¢å¤åçš„MergeåŠŸèƒ½ï¼Œâ€œè„‘è£‚â€æœŸé—´çš„æ›´æ–°å¯èƒ½ä¸¢å¤±</li>
</ul>
<p>æ³¨æ„ï¼Œå¦‚æœè®¾ç½®Redis Clusterçš„æ•°æ®å†—ä½™æ˜¯1çš„è¯ï¼Œè‡³å°‘è¦3ä¸ªMasterå’Œ3ä¸ªSlaveã€‚</p>
<h1 id="Redis-Clusterå®¹é”™æœºåˆ¶-failover"><a href="#Redis-Clusterå®¹é”™æœºåˆ¶-failover" class="headerlink" title="Redis Clusterå®¹é”™æœºåˆ¶ - failover"></a>Redis Clusterå®¹é”™æœºåˆ¶ - failover</h1><p>failoveræ˜¯redis clusterçš„å®¹é”™æœºåˆ¶ï¼Œæ˜¯redis clusteræœ€æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ï¼›å®ƒå…è®¸åœ¨æŸäº›èŠ‚ç‚¹å¤±æ•ˆæƒ…å†µä¸‹ï¼Œé›†ç¾¤è¿˜èƒ½æ­£å¸¸æä¾›æœåŠ¡ã€‚</p>
<p>redis clusteré‡‡ç”¨ä¸»ä»æ¶æ„ï¼Œä»»ä½•æ—¶å€™åªæœ‰ä¸»èŠ‚ç‚¹æä¾›æœåŠ¡ï¼Œä»èŠ‚ç‚¹è¿›è¡Œçƒ­å¤‡ä»½ï¼Œæ•…å…¶å®¹é”™æœºåˆ¶æ˜¯ä¸»ä»åˆ‡æ¢æœºåˆ¶ï¼Œå³ä¸»èŠ‚ç‚¹å¤±æ•ˆåï¼Œé€‰å–ä¸€ä¸ªä»èŠ‚ç‚¹ä½œä¸ºæ–°çš„ä¸»èŠ‚ç‚¹ã€‚åœ¨å®ç°ä¸Šä¹Ÿå¤ç”¨äº†æ—§ç‰ˆæœ¬çš„ä¸»ä»åŒæ­¥æœºåˆ¶ã€‚</p>
<p>ä»çºµå‘çœ‹ï¼Œredis clusteræ˜¯ä¸€å±‚æ¶æ„ï¼ŒèŠ‚ç‚¹åˆ†ä¸ºä¸»èŠ‚ç‚¹å’Œä»èŠ‚ç‚¹ã€‚ä»èŠ‚ç‚¹æŒ‚æ‰æˆ–å¤±æ•ˆï¼Œä¸éœ€è¦è¿›è¡Œfailoverï¼Œredis clusterèƒ½æ­£å¸¸æä¾›æœåŠ¡ï¼›ä¸»èŠ‚ç‚¹æŒ‚æ‰æˆ–å¤±æ•ˆéœ€è¦è¿›è¡Œfailoverã€‚å¦å¤–ï¼Œredis clusterè¿˜æ”¯æŒmanual failoverï¼Œå³äººå·¥è¿›è¡Œfailoverï¼Œå°†ä»èŠ‚ç‚¹å˜ä¸ºä¸»èŠ‚ç‚¹ï¼Œå³ä½¿ä¸»èŠ‚ç‚¹è¿˜æ´»ç€ã€‚</p>
<p>ä¸‹é¢å°†ä»‹ç»è¿™ä¸¤ç§ç±»å‹çš„failoverã€‚</p>
<h2 id="ä¸»èŠ‚ç‚¹å¤±æ•ˆäº§ç”Ÿçš„failover"><a href="#ä¸»èŠ‚ç‚¹å¤±æ•ˆäº§ç”Ÿçš„failover" class="headerlink" title="ä¸»èŠ‚ç‚¹å¤±æ•ˆäº§ç”Ÿçš„failover"></a><strong>ä¸»èŠ‚ç‚¹å¤±æ•ˆäº§ç”Ÿçš„failover</strong></h2><h3 id="1-ï¼ˆä¸»ï¼‰èŠ‚ç‚¹å¤±æ•ˆæ£€æµ‹"><a href="#1-ï¼ˆä¸»ï¼‰èŠ‚ç‚¹å¤±æ•ˆæ£€æµ‹" class="headerlink" title="1 ï¼ˆä¸»ï¼‰èŠ‚ç‚¹å¤±æ•ˆæ£€æµ‹"></a>1 ï¼ˆä¸»ï¼‰èŠ‚ç‚¹å¤±æ•ˆæ£€æµ‹</h3><p>ä¸€èˆ¬åœ°ï¼Œé›†ç¾¤ä¸­çš„èŠ‚ç‚¹ä¼šå‘å…¶ä»–èŠ‚ç‚¹å‘é€PINGæ•°æ®åŒ…ï¼ŒåŒæ—¶ä¹Ÿæ€»æ˜¯åº”ç­”ï¼ˆacceptï¼‰æ¥è‡ªé›†ç¾¤è¿æ¥ç«¯å£çš„è¿æ¥è¯·æ±‚ï¼Œå¹¶å¯¹æ¥æ”¶åˆ°çš„PINGæ•°æ®åŒ…è¿›è¡Œå›å¤ã€‚å½“ä¸€ä¸ªèŠ‚ç‚¹å‘å¦ä¸€ä¸ªèŠ‚ç‚¹å‘PINGå‘½ä»¤ï¼Œä½†æ˜¯ç›®æ ‡èŠ‚ç‚¹æœªèƒ½åœ¨ç»™å®šçš„æ—¶é™ï¼ˆnode timeoutï¼‰å†…å›å¤æ—¶ï¼Œé‚£ä¹ˆå‘é€å‘½ä»¤çš„èŠ‚ç‚¹ä¼šå°†ç›®æ ‡èŠ‚ç‚¹æ ‡è®°ä¸ºPFAILï¼ˆpossible failureï¼‰ã€‚</p>
<p>ç”±äºèŠ‚ç‚¹é—´çš„äº¤äº’æ€»æ˜¯ä¼´éšç€ä¿¡æ¯ä¼ æ’­çš„åŠŸèƒ½ï¼Œæ­¤æ—¶æ¯æ¬¡å½“èŠ‚ç‚¹å¯¹å…¶ä»–èŠ‚ç‚¹å‘é€ PING å‘½ä»¤çš„æ—¶å€™ï¼Œå°±ä¼šå‘ŠçŸ¥ç›®æ ‡èŠ‚ç‚¹æ­¤æ—¶é›†ç¾¤ä¸­å·²ç»è¢«æ ‡è®°ä¸ºPFAILæˆ–è€…FAILæ ‡è®°çš„èŠ‚ç‚¹ã€‚ç›¸åº”çš„ï¼Œå½“èŠ‚ç‚¹æ¥æ”¶åˆ°å…¶ä»–èŠ‚ç‚¹å‘æ¥çš„ä¿¡æ¯æ—¶ï¼Œ å®ƒä¼šè®°ä¸‹é‚£äº›è¢«å…¶ä»–èŠ‚ç‚¹æ ‡è®°ä¸ºå¤±æ•ˆçš„èŠ‚ç‚¹ã€‚ è¿™ç§°ä¸ºå¤±æ•ˆæŠ¥å‘Šï¼ˆfailure reportï¼‰ã€‚</p>
<p>å¦‚æœèŠ‚ç‚¹å·²ç»å°†æŸä¸ªèŠ‚ç‚¹æ ‡è®°ä¸ºPFAILï¼Œå¹¶ä¸”æ ¹æ®èŠ‚ç‚¹æ‰€æ”¶åˆ°çš„å¤±æ•ˆæŠ¥å‘Šæ˜¾å¼ï¼Œé›†ç¾¤ä¸­çš„å¤§éƒ¨åˆ†å…¶ä»–ä¸»èŠ‚ç‚¹ï¼ˆn/2+1ï¼‰ä¹Ÿè®¤ä¸ºé‚£ä¸ªèŠ‚ç‚¹è¿›å…¥äº†å¤±æ•ˆçŠ¶æ€ï¼Œé‚£ä¹ˆèŠ‚ç‚¹ä¼šå°†é‚£ä¸ªPFAILèŠ‚ç‚¹çš„çŠ¶æ€æ ‡è®°ä¸ºFAILã€‚</p>
<p>ä¸€æ—¦æŸä¸ªèŠ‚ç‚¹è¢«æ ‡è®°ä¸ºFAILï¼Œå…³äºè¿™ä¸ªèŠ‚ç‚¹å·²å¤±æ•ˆçš„ä¿¡æ¯å°±ä¼šè¢«å¹¿æ’­åˆ°æ•´ä¸ªé›†ç¾¤ï¼Œæ‰€æœ‰æ¥æ”¶åˆ°è¿™æ¡ä¿¡æ¯çš„èŠ‚ç‚¹éƒ½ä¼šå°†å¤±æ•ˆèŠ‚ç‚¹æ ‡è®°ä¸ºFAILã€‚</p>
<h3 id="2-é€‰ä¸¾ä¸»èŠ‚ç‚¹"><a href="#2-é€‰ä¸¾ä¸»èŠ‚ç‚¹" class="headerlink" title="2 é€‰ä¸¾ä¸»èŠ‚ç‚¹"></a>2 é€‰ä¸¾ä¸»èŠ‚ç‚¹</h3><p>ä¸€æ—¦æŸä¸ªä¸»èŠ‚ç‚¹è¿›å…¥ FAIL çŠ¶æ€ï¼Œ é›†ç¾¤å˜ä¸ºFAILçŠ¶æ€ï¼ŒåŒæ—¶ä¼šè§¦å‘failoverã€‚failoverçš„ç›®çš„æ˜¯ä»ä»èŠ‚ç‚¹ä¸­é€‰ä¸¾å‡ºæ–°çš„ä¸»èŠ‚ç‚¹ï¼Œä½¿å¾—é›†ç¾¤æ¢å¤æ­£å¸¸ç»§ç»­æä¾›æœåŠ¡ã€‚</p>
<p><strong>æ•´ä¸ªä¸»èŠ‚ç‚¹é€‰ä¸¾çš„è¿‡ç¨‹å¯åˆ†ä¸ºç”³è¯·ã€æˆæƒã€å‡çº§ã€åŒæ­¥å››ä¸ªé˜¶æ®µï¼š</strong></p>
<h4 id="1-ç”³è¯·"><a href="#1-ç”³è¯·" class="headerlink" title="1 ç”³è¯·"></a>1 ç”³è¯·</h4><p>æ–°çš„ä¸»èŠ‚ç‚¹ç”±åŸå·²å¤±æ•ˆçš„ä¸»èŠ‚ç‚¹å±ä¸‹çš„æ‰€æœ‰ä»èŠ‚ç‚¹ä¸­è‡ªè¡Œé€‰ä¸¾äº§ç”Ÿï¼Œä»èŠ‚ç‚¹çš„é€‰ä¸¾éµå¾ªä»¥ä¸‹æ¡ä»¶ï¼š</p>
<ol>
<li>è¿™ä¸ªèŠ‚ç‚¹æ˜¯å·²ä¸‹çº¿ä¸»èŠ‚ç‚¹çš„ä»èŠ‚ç‚¹ï¼›</li>
<li>å·²ä¸‹çº¿ä¸»èŠ‚ç‚¹è´Ÿè´£å¤„ç†çš„å“ˆå¸Œæ§½æ•°é‡éç©ºï¼›</li>
<li>cã€ä¸»ä»èŠ‚ç‚¹ä¹‹é—´çš„å¤åˆ¶è¿æ¥çš„æ–­çº¿æ—¶é•¿æœ‰é™ï¼Œä¸è¶…è¿‡ ( (node-timeout * slave-validity-factor) + repl-ping-slave-period ï¼‰ã€‚</li>
</ol>
<p>å¦‚æœä¸€ä¸ªä»èŠ‚ç‚¹æ»¡è¶³äº†ä»¥ä¸Šçš„æ‰€æœ‰æ¡ä»¶ï¼Œé‚£ä¹ˆè¿™ä¸ªä»èŠ‚ç‚¹å°†å‘é›†ç¾¤ä¸­çš„å…¶ä»–ä¸»èŠ‚ç‚¹å‘é€æˆæƒè¯·æ±‚ï¼Œè¯¢é—®å®ƒä»¬æ˜¯å¦å…è®¸è‡ªå·±å‡çº§ä¸ºæ–°çš„ä¸»èŠ‚ç‚¹ã€‚</p>
<p>ä»èŠ‚ç‚¹å‘é€æˆæƒè¯·æ±‚çš„æ—¶æœºä¼šæ ¹æ®å„ä»èŠ‚ç‚¹ä¸ä¸»èŠ‚ç‚¹çš„æ•°æ®åå·®æ¥è¿›è¡Œæ’åºï¼Œè®©åå·®å°çš„ä»èŠ‚ç‚¹ä¼˜å…ˆå‘èµ·æˆæƒè¯·æ±‚ã€‚</p>
<h4 id="2-æˆæƒ"><a href="#2-æˆæƒ" class="headerlink" title="2 æˆæƒ"></a>2 æˆæƒ</h4><p>å…¶ä»–ä¸»èŠ‚ç‚¹ä¼šéµä¿¡ä»¥ä¸‹ä¸‰ç‚¹æ ‡å‡†æ¥è¿›è¡Œåˆ¤æ–­ï¼š</p>
<ol>
<li>å‘é€æˆæƒè¯·æ±‚çš„æ˜¯ä»èŠ‚ç‚¹ï¼Œè€Œä¸”å®ƒæ‰€å±çš„ä¸»èŠ‚ç‚¹å¤„äºFAILçŠ¶æ€ ï¼›</li>
<li>ä»èŠ‚ç‚¹çš„currentEpochã€‰è‡ªèº«çš„currentEpochï¼Œä»èŠ‚ç‚¹çš„configEpoch&gt;=è‡ªèº«ä¿å­˜çš„è¯¥ä»èŠ‚ç‚¹çš„configEpochï¼›</li>
<li>è¿™ä¸ªä»èŠ‚ç‚¹å¤„äºæ­£å¸¸çš„è¿è¡ŒçŠ¶æ€ï¼Œæ²¡æœ‰è¢«æ ‡è®°ä¸ºFAILæˆ–PFAILçŠ¶æ€ï¼›</li>
</ol>
<p>å¦‚æœå‘é€æˆæƒè¯·æ±‚çš„ä»èŠ‚ç‚¹æ»¡è¶³ä»¥ä¸Šæ ‡å‡†ï¼Œé‚£ä¹ˆä¸»èŠ‚ç‚¹å°†åŒæ„ä»èŠ‚ç‚¹çš„å‡çº§è¦æ±‚ï¼Œå‘ä»èŠ‚ç‚¹è¿”å›CLUSTERMSG_TYPE_FAILOVER_AUTH_ACKæˆæƒã€‚</p>
<h4 id="3-å‡çº§"><a href="#3-å‡çº§" class="headerlink" title="3 å‡çº§"></a>3 å‡çº§</h4><p>ä¸€æ—¦æŸä¸ªä»èŠ‚ç‚¹åœ¨ç»™å®šçš„æ—¶é™å†…å¾—åˆ°å¤§éƒ¨åˆ†ä¸»èŠ‚ç‚¹ï¼ˆn/2+1ï¼‰çš„æˆæƒï¼Œå®ƒå°±ä¼šæ¥ç®¡æ‰€æœ‰ç”±å·²ä¸‹çº¿ä¸»èŠ‚ç‚¹è´Ÿè´£å¤„ç†çš„å“ˆå¸Œæ§½ï¼Œå¹¶ä¸»åŠ¨å‘å…¶ä»–èŠ‚ç‚¹å‘é€ä¸€ä¸ªPONGæ•°æ®åŒ…ï¼ŒåŒ…å«ä»¥ä¸‹å†…å®¹ï¼š</p>
<ol>
<li>å‘ŠçŸ¥å…¶ä»–èŠ‚ç‚¹è‡ªå·±ç°åœ¨æ˜¯ä¸»èŠ‚ç‚¹äº†</li>
<li>å‘ŠçŸ¥å…¶ä»–èŠ‚ç‚¹è‡ªå·±æ˜¯ä¸€ä¸ªROMOTED SLAVEï¼Œå³å·²å‡çº§çš„ä»èŠ‚ç‚¹ï¼›</li>
<li>cã€å‘ŠçŸ¥å…¶ä»–èŠ‚ç‚¹éƒ½æ ¹æ®è‡ªå·±æ–°çš„èŠ‚ç‚¹å±æ€§ä¿¡æ¯å¯¹é…ç½®è¿›è¡Œç›¸åº”çš„æ›´æ–°</li>
</ol>
<h4 id="4-åŒæ­¥"><a href="#4-åŒæ­¥" class="headerlink" title="4 åŒæ­¥"></a>4 åŒæ­¥</h4><p>å…¶ä»–èŠ‚ç‚¹åœ¨æ¥æ”¶åˆ°ROMOTED SLAVEçš„å‘ŠçŸ¥åï¼Œä¼šæ ¹æ®æ–°çš„ä¸»èŠ‚ç‚¹å¯¹é…ç½®è¿›è¡Œç›¸åº”çš„æ›´æ–°ã€‚ç‰¹åˆ«åœ°ï¼Œå…¶ä»–ä»èŠ‚ç‚¹ä¼šå°†æ–°çš„ä¸»èŠ‚ç‚¹è®¾ä¸ºè‡ªå·±çš„ä¸»èŠ‚ç‚¹ï¼Œä»è€Œä¸æ–°çš„ä¸»èŠ‚ç‚¹è¿›è¡Œæ•°æ®åŒæ­¥ã€‚<br>è‡³æ­¤ï¼Œfailoverç»“æŸï¼Œé›†ç¾¤æ¢å¤æ­£å¸¸çŠ¶æ€ã€‚</p>
<p>æ­¤æ—¶ï¼Œå¦‚æœåŸä¸»èŠ‚ç‚¹æ¢å¤æ­£å¸¸ï¼Œä½†ç”±äºå…¶çš„configEpochå°äºå…¶ä»–èŠ‚ç‚¹ä¿å­˜çš„configEpochï¼ˆfailoveräº†äº§ç”Ÿè¾ƒå¤§çš„configEpochï¼‰ï¼Œæ•…å…¶é…ç½®ä¼šè¢«æ›´æ–°ä¸ºæœ€æ–°é…ç½®ï¼Œå¹¶å°†è‡ªå·±è®¾æ–°ä¸»èŠ‚ç‚¹çš„ä»èŠ‚ç‚¹ã€‚</p>
<p>å¦å¤–ï¼Œåœ¨failoverè¿‡ç¨‹ä¸­ï¼Œå¦‚æœåŸä¸»èŠ‚ç‚¹æ¢å¤æ­£å¸¸ï¼Œfailoverä¸­æ­¢ï¼Œä¸ä¼šäº§ç”Ÿæ–°çš„ä¸»èŠ‚ç‚¹ã€‚</p>
<h2 id="Manual-Failover"><a href="#Manual-Failover" class="headerlink" title="Manual Failover"></a>Manual Failover</h2><p>Manual Failoveræ˜¯ä¸€ç§è¿ç»´åŠŸèƒ½ï¼Œå…è®¸æ‰‹åŠ¨è®¾ç½®ä»èŠ‚ç‚¹ä¸ºæ–°çš„ä¸»èŠ‚ç‚¹ï¼Œå³ä½¿ä¸»èŠ‚ç‚¹è¿˜æ´»ç€ã€‚</p>
<p>Manual Failoverä¸ä¸Šé¢ä»‹ç»çš„Failoveræµç¨‹å¤§éƒ½ç›¸åŒï¼Œé™¤äº†ä¸‹é¢ä¸¤ç‚¹ä¸åŒï¼š</p>
<ul>
<li>è§¦å‘æœºåˆ¶ä¸åŒï¼ŒManual Failoveræ˜¯é€šè¿‡å®¢æˆ·ç«¯å‘é€cluster failoverè§¦å‘ï¼Œè€Œä¸”å‘é€å¯¹è±¡åªèƒ½æ˜¯ä»èŠ‚ç‚¹ï¼›</li>
<li>ç”³è¯·æ¡ä»¶ä¸åŒï¼ŒManual Failoverä¸éœ€è¦ä¸»èŠ‚ç‚¹å¤±æ•ˆï¼Œfailoveræœ‰æ•ˆæ—¶é•¿å›ºå®šä¸º5ç§’ï¼Œè€Œä¸”åªæœ‰æ”¶åˆ°å‘½ä»¤çš„ä»èŠ‚ç‚¹æ‰ä¼šå‘èµ·ç”³è¯·ã€‚</li>
</ul>
<p>å¦å¤–ï¼ŒManual Failoveråˆ†forceå’Œéforceï¼ŒåŒºåˆ«åœ¨äºï¼šéforceéœ€è¦ç­‰ä»èŠ‚ç‚¹å®Œå…¨åŒæ­¥å®Œä¸»èŠ‚ç‚¹çš„æ•°æ®åæ‰è¿›è¡Œfailoverï¼Œä¿è¯ä¸ä¸¢å¤±æ•°æ®ï¼Œåœ¨è¿™è¿‡ç¨‹ä¸­ï¼ŒåŸä¸»èŠ‚ç‚¹åœæ­¢å†™æ“ä½œï¼›è€Œforceä¸è¿›è¡Œè¿›è¡Œæ•°æ®å®Œæ•´åŒæ­¥ï¼Œç›´æ¥è¿›è¡Œfailoverã€‚</p>
<h2 id="é›†ç¾¤çŠ¶æ€æ£€æµ‹"><a href="#é›†ç¾¤çŠ¶æ€æ£€æµ‹" class="headerlink" title="é›†ç¾¤çŠ¶æ€æ£€æµ‹"></a>é›†ç¾¤çŠ¶æ€æ£€æµ‹</h2><p>é›†ç¾¤æœ‰OKå’ŒFAILä¸¤ç§çŠ¶æ€ï¼Œå¯ä»¥é€šè¿‡CLUSTER INFOå‘½ä»¤æŸ¥çœ‹ã€‚å½“é›†ç¾¤å‘ç”Ÿé…ç½®å˜åŒ–æ—¶ï¼Œ é›†ç¾¤ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šå¯¹å®ƒæ‰€çŸ¥é“çš„èŠ‚ç‚¹è¿›è¡Œæ‰«æï¼Œåªè¦é›†ç¾¤ä¸­è‡³å°‘æœ‰ä¸€ä¸ªå“ˆå¸Œæ§½ä¸å¯ç”¨ï¼ˆå³è´Ÿè´£è¯¥å“ˆå¸Œæ§½çš„ä¸»èŠ‚ç‚¹å¤±æ•ˆï¼‰ï¼Œé›†ç¾¤å°±ä¼šè¿›å…¥FAILçŠ¶æ€ï¼Œåœæ­¢å¤„ç†ä»»ä½•å‘½ä»¤ã€‚<br>å¦å¤–ï¼Œå½“å¤§éƒ¨åˆ†ä¸»èŠ‚ç‚¹éƒ½è¿›å…¥PFAILçŠ¶æ€æ—¶ï¼Œé›†ç¾¤ä¹Ÿä¼šè¿›å…¥FAILçŠ¶æ€ã€‚è¿™æ˜¯å› ä¸ºè¦å°†ä¸€ä¸ªèŠ‚ç‚¹ä»PFAILçŠ¶æ€æ”¹å˜ä¸ºFAILçŠ¶æ€ï¼Œå¿…é¡»è¦æœ‰å¤§éƒ¨åˆ†ä¸»èŠ‚ç‚¹ï¼ˆn/2+1ï¼‰è®¤å¯ï¼Œå½“é›†ç¾¤ä¸­çš„å¤§éƒ¨åˆ†ä¸»èŠ‚ç‚¹éƒ½è¿›å…¥PFAILæ—¶ï¼Œå•å‡­å°‘æ•°èŠ‚ç‚¹æ˜¯æ²¡æœ‰åŠæ³•å°†ä¸€ä¸ªèŠ‚ç‚¹æ ‡è®°ä¸ºFAILçŠ¶æ€çš„ã€‚ ç„¶è€Œé›†ç¾¤ä¸­çš„å¤§éƒ¨åˆ†ä¸»èŠ‚ç‚¹(n/2+1)è¿›å…¥äº†ä¸‹çº¿çŠ¶æ€ï¼Œè®©é›†ç¾¤å˜ä¸ºFAILï¼Œæ˜¯ä¸ºäº†é˜²æ­¢å°‘æ•°å­˜ç€ä¸»èŠ‚ç‚¹ç»§ç»­å¤„ç†ç”¨æˆ·è¯·æ±‚ï¼Œè¿™è§£å†³äº†å‡ºç°ç½‘ç»œåˆ†åŒºæ—¶ï¼Œä¸€ä¸ªå¯èƒ½è¢«ä¸¤ä¸ªä¸»èŠ‚ç‚¹è´Ÿè´£çš„å“ˆå¸Œæ§½ï¼ŒåŒæ—¶è¢«ç”¨æˆ·è¿›è¡Œè¯»å†™æ“ä½œï¼ˆé€šè¿‡ç¦æ‰å…¶ä¸­å°‘æ•°æ´¾è¯»å†™æ“ä½œï¼Œè¯ä¿åªæœ‰ä¸€ä¸ªè¯»å†™æ“ä½œï¼‰ï¼Œé€ æˆæ•°æ®ä¸¢å¤±æ•°æ®é—®é¢˜ã€‚<br>è¯´æ˜ï¼šä¸Šé¢n/2+1çš„næ˜¯æŒ‡é›†ç¾¤é‡Œæœ‰è´Ÿè´£å“ˆå¸Œæ§½çš„ä¸»èŠ‚ç‚¹ä¸ªæ•°ã€‚</p>
<h1 id="æ‰©å®¹-amp-ç¼©å®¹"><a href="#æ‰©å®¹-amp-ç¼©å®¹" class="headerlink" title="æ‰©å®¹&amp;ç¼©å®¹"></a>æ‰©å®¹&amp;ç¼©å®¹</h1><h2 id="æ‰©å®¹"><a href="#æ‰©å®¹" class="headerlink" title="æ‰©å®¹"></a>æ‰©å®¹</h2><p>å½“é›†ç¾¤å‡ºç°å®¹é‡é™åˆ¶æˆ–è€…å…¶ä»–ä¸€äº›åŸå› éœ€è¦æ‰©å®¹æ—¶ï¼Œredis clusteræä¾›äº†æ¯”è¾ƒä¼˜é›…çš„é›†ç¾¤æ‰©å®¹æ–¹æ¡ˆã€‚</p>
<p>é¦–å…ˆå°†æ–°èŠ‚ç‚¹åŠ å…¥åˆ°é›†ç¾¤ä¸­ï¼Œå¯ä»¥é€šè¿‡åœ¨é›†ç¾¤ä¸­ä»»ä½•ä¸€ä¸ªå®¢æˆ·ç«¯æ‰§è¡Œcluster meet æ–°èŠ‚ç‚¹ip:ç«¯å£ï¼Œæˆ–è€…é€šè¿‡redis-trib add nodeæ·»åŠ ï¼Œæ–°æ·»åŠ çš„èŠ‚ç‚¹é»˜è®¤åœ¨é›†ç¾¤ä¸­éƒ½æ˜¯ä¸»èŠ‚ç‚¹ã€‚</p>
<p>è¿ç§»æ•°æ®<br>è¿ç§»æ•°æ®çš„å¤§è‡´æµç¨‹æ˜¯ï¼Œé¦–å…ˆéœ€è¦ç¡®å®šå“ªäº›æ§½éœ€è¦è¢«è¿ç§»åˆ°ç›®æ ‡èŠ‚ç‚¹ï¼Œç„¶åè·å–æ§½ä¸­keyï¼Œå°†æ§½ä¸­çš„keyå…¨éƒ¨è¿ç§»åˆ°ç›®æ ‡èŠ‚ç‚¹ï¼Œç„¶åå‘é›†ç¾¤æ‰€æœ‰ä¸»èŠ‚ç‚¹å¹¿æ’­æ§½ï¼ˆæ•°æ®ï¼‰å…¨éƒ¨è¿ç§»åˆ°äº†ç›®æ ‡èŠ‚ç‚¹ã€‚ç›´æ¥é€šè¿‡redis-tribå·¥å…·åšæ•°æ®è¿ç§»å¾ˆæ–¹ä¾¿ã€‚ ç°åœ¨å‡è®¾å°†èŠ‚ç‚¹Açš„æ§½10è¿ç§»åˆ°BèŠ‚ç‚¹ï¼Œè¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">B:cluster setslot 10 importing A.nodeId</span><br><span class="line">A:cluster setslot 10 migrating B.nodeId</span><br></pre></td></tr></table></figure>

<p>å¾ªç¯è·å–æ§½ä¸­keyï¼Œå°†keyè¿ç§»åˆ°BèŠ‚ç‚¹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">A:cluster getkeysinslot 10 100</span><br><span class="line">A:migrate B.ip B.port &quot;&quot; 0 5000 keys key1[ key2....]</span><br></pre></td></tr></table></figure>

<p>å‘é›†ç¾¤å¹¿æ’­æ§½å·²ç»è¿ç§»åˆ°BèŠ‚ç‚¹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cluster setslot 10 node B.nodeId</span><br></pre></td></tr></table></figure>

<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ul>
<li><a href="https://redis.io/topics/cluster-tutorial" target="_blank" rel="noopener">https://redis.io/topics/cluster-tutorial</a></li>
<li><a href="https://www.cnblogs.com/kevingrace/p/7955725.html" target="_blank" rel="noopener">https://www.cnblogs.com/kevingrace/p/7955725.html</a></li>
</ul>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color3">Cache System</a>
        		</li>
      		 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color1">Redis</a>
        		</li>
      		
		</ul>
	</div>

      
	<div class="article-category tagcloud">
		<i class="icon-book icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="/categories/CacheSystem/" class="article-tag-list-link color2">CacheSystem</a>
        		</li>
      		 
        		<li class="article-tag-list-item">
        			<a href="/categories/Redis/" class="article-tag-list-link color1">Redis</a>
        		</li>
      		
		</ul>
	</div>


      

      
        
<div class="share-btn share-icons tooltip-left">
  <div class="tooltip tooltip-east">
    <span class="tooltip-item">
      <a href="javascript:;" class="share-sns share-outer">
        <i class="icon icon-share"></i>
      </a>
    </span>
    <span class="tooltip-content">
      <div class="share-wrap">
        <div class="share-icons">
          <a class="weibo share-sns" href="javascript:;" data-type="weibo">
            <i class="icon icon-weibo"></i>
          </a>
          <a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin">
            <i class="icon icon-weixin"></i>
          </a>
          <a class="qq share-sns" href="javascript:;" data-type="qq">
            <i class="icon icon-qq"></i>
          </a>
          <a class="douban share-sns" href="javascript:;" data-type="douban">
            <i class="icon icon-douban"></i>
          </a>
          <a class="qzone share-sns" href="javascript:;" data-type="qzone">
            <i class="icon icon-qzone"></i>
          </a>
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="icon icon-facebook"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="icon icon-twitter"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="icon icon-google"></i>
          </a>
        </div>
      </div>
    </span>
  </div>
</div>

<div class="page-modal wx-share js-wx-box">
    <a class="close js-modal-close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>æ‰«ä¸€æ‰«ï¼Œåˆ†äº«åˆ°å¾®ä¿¡</p>
    <div class="wx-qrcode">
   
    </div>
</div>

<div class="mask js-mask"></div>
      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

  
<nav id="article-nav">
  
    <a href="/2020/07/12/ã€Protobufã€‘Protocol-Buffers-2ä¸­ä½¿ç”¨map/" id="article-nav-newer" class="article-nav-link-wrap">
      <i class="icon-circle-left"></i>
      <div class="article-nav-title">
        
          ã€Protobufã€‘Protocol Buffers 2ä¸­ä½¿ç”¨map
        
      </div>
    </a>
  
  
    <a href="/2020/07/10/ã€Redisã€‘Redis-é›†ç¾¤æ–¹æ¡ˆ/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">ã€Cache Systemã€‘Redis é›†ç¾¤æ–¹æ¡ˆ</div>
      <i class="icon-circle-right"></i>
    </a>
  
</nav>






  
    <div class="duoshuo"></div>
  




          </div>
        </div>
      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2020 è¥¿ç»´èœ€é»
    	</div>
      	<div class="footer-right">
      		
      	</div>
    </div>
  </div>
</footer>
    </div>
    <script>
	var yiliaConfig = {
		mathjax: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: true,
		root: "/",
		innerArchive: true,
		showTags: true
	}
</script>

<script>!function(t){function n(r){if(e[r])return e[r].exports;var o=e[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var e={};return n.m=t,n.c=e,n.p="./",n(0)}([function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,n){var e=/\/|index.html/g;return t.replace(e,"")===n.replace(e,"")}function i(){for(var t=document.querySelectorAll(".js-header-menu li a"),n=window.location.pathname,e=0,r=t.length;e<r;e++){var i=t[e];o(n,i.getAttribute("href"))&&(0,d.default)(i,"active")}}function u(t){for(var n=t.offsetLeft,e=t.offsetParent;null!==e;)n+=e.offsetLeft,e=e.offsetParent;return n}function f(t){for(var n=t.offsetTop,e=t.offsetParent;null!==e;)n+=e.offsetTop,e=e.offsetParent;return n}function c(t,n,e,r,o){var i=u(t),c=f(t)-n;if(c-e<=o){var a=t.$newDom;a||(a=t.cloneNode(!0),(0,h.default)(t,a),t.$newDom=a,a.style.position="fixed",a.style.top=(e||c)+"px",a.style.left=i+"px",a.style.zIndex=r||2,a.style.width="100%",a.style.color="#fff"),a.style.visibility="visible",t.style.visibility="hidden"}else{t.style.visibility="visible";var s=t.$newDom;s&&(s.style.visibility="hidden")}}function a(){var t=document.querySelector(".js-overlay"),n=document.querySelector(".js-header-menu");c(t,document.body.scrollTop,-63,2,0),c(n,document.body.scrollTop,1,3,0)}function s(){document.querySelector("#container").addEventListener("scroll",function(t){a()}),window.addEventListener("scroll",function(t){a()}),a()}function l(){x.default.versions.mobile&&window.screen.width<800&&(i(),s())}var p=e(71),d=r(p),v=e(72),y=(r(v),e(84)),h=r(y),b=e(69),x=r(b),m=e(75),g=r(m),w=e(70);l(),(0,w.addLoadEvent)(function(){g.default.init()}),t.exports={}},function(t,n){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},function(t,n){var e={}.hasOwnProperty;t.exports=function(t,n){return e.call(t,n)}},function(t,n,e){var r=e(49),o=e(15);t.exports=function(t){return r(o(t))}},function(t,n,e){t.exports=!e(8)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,e){var r=e(6),o=e(12);t.exports=e(4)?function(t,n,e){return r.f(t,n,o(1,e))}:function(t,n,e){return t[n]=e,t}},function(t,n,e){var r=e(10),o=e(30),i=e(24),u=Object.defineProperty;n.f=e(4)?Object.defineProperty:function(t,n,e){if(r(t),n=i(n,!0),r(e),o)try{return u(t,n,e)}catch(t){}if("get"in e||"set"in e)throw TypeError("Accessors not supported!");return"value"in e&&(t[n]=e.value),t}},function(t,n,e){var r=e(22)("wks"),o=e(13),i=e(1).Symbol,u="function"==typeof i,f=t.exports=function(t){return r[t]||(r[t]=u&&i[t]||(u?i:o)("Symbol."+t))};f.store=r},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n,e){var r=e(35),o=e(16);t.exports=Object.keys||function(t){return r(t,o)}},function(t,n,e){var r=e(11);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var e=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++e+r).toString(36))}},function(t,n){var e=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=e)},function(t,n){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n){t.exports={}},function(t,n){t.exports=!0},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,e){var r=e(6).f,o=e(2),i=e(7)("toStringTag");t.exports=function(t,n,e){t&&!o(t=e?t:t.prototype,i)&&r(t,i,{configurable:!0,value:n})}},function(t,n,e){var r=e(22)("keys"),o=e(13);t.exports=function(t){return r[t]||(r[t]=o(t))}},function(t,n,e){var r=e(1),o="__core-js_shared__",i=r[o]||(r[o]={});t.exports=function(t){return i[t]||(i[t]={})}},function(t,n){var e=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:e)(t)}},function(t,n,e){var r=e(11);t.exports=function(t,n){if(!r(t))return t;var e,o;if(n&&"function"==typeof(e=t.toString)&&!r(o=e.call(t)))return o;if("function"==typeof(e=t.valueOf)&&!r(o=e.call(t)))return o;if(!n&&"function"==typeof(e=t.toString)&&!r(o=e.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,n,e){var r=e(1),o=e(14),i=e(18),u=e(26),f=e(6).f;t.exports=function(t){var n=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==t.charAt(0)||t in n||f(n,t,{value:u.f(t)})}},function(t,n,e){n.f=e(7)},function(t,n,e){var r=e(1),o=e(14),i=e(46),u=e(5),f="prototype",c=function(t,n,e){var a,s,l,p=t&c.F,d=t&c.G,v=t&c.S,y=t&c.P,h=t&c.B,b=t&c.W,x=d?o:o[n]||(o[n]={}),m=x[f],g=d?r:v?r[n]:(r[n]||{})[f];d&&(e=n);for(a in e)s=!p&&g&&void 0!==g[a],s&&a in x||(l=s?g[a]:e[a],x[a]=d&&"function"!=typeof g[a]?e[a]:h&&s?i(l,r):b&&g[a]==l?function(t){var n=function(n,e,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,e)}return new t(n,e,r)}return t.apply(this,arguments)};return n[f]=t[f],n}(l):y&&"function"==typeof l?i(Function.call,l):l,y&&((x.virtual||(x.virtual={}))[a]=l,t&c.R&&m&&!m[a]&&u(m,a,l)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,n){var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},function(t,n,e){var r=e(11),o=e(1).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,n,e){t.exports=!e(4)&&!e(8)(function(){return 7!=Object.defineProperty(e(29)("div"),"a",{get:function(){return 7}}).a})},function(t,n,e){"use strict";var r=e(18),o=e(27),i=e(36),u=e(5),f=e(2),c=e(17),a=e(51),s=e(20),l=e(58),p=e(7)("iterator"),d=!([].keys&&"next"in[].keys()),v="@@iterator",y="keys",h="values",b=function(){return this};t.exports=function(t,n,e,x,m,g,w){a(e,n,x);var O,S,_,j=function(t){if(!d&&t in A)return A[t];switch(t){case y:return function(){return new e(this,t)};case h:return function(){return new e(this,t)}}return function(){return new e(this,t)}},P=n+" Iterator",E=m==h,M=!1,A=t.prototype,T=A[p]||A[v]||m&&A[m],L=T||j(m),N=m?E?j("entries"):L:void 0,C="Array"==n?A.entries||T:T;if(C&&(_=l(C.call(new t)),_!==Object.prototype&&(s(_,P,!0),r||f(_,p)||u(_,p,b))),E&&T&&T.name!==h&&(M=!0,L=function(){return T.call(this)}),r&&!w||!d&&!M&&A[p]||u(A,p,L),c[n]=L,c[P]=b,m)if(O={values:E?L:j(h),keys:g?L:j(y),entries:N},w)for(S in O)S in A||i(A,S,O[S]);else o(o.P+o.F*(d||M),n,O);return O}},function(t,n,e){var r=e(10),o=e(55),i=e(16),u=e(21)("IE_PROTO"),f=function(){},c="prototype",a=function(){var t,n=e(29)("iframe"),r=i.length,o="<",u=">";for(n.style.display="none",e(48).appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write(o+"script"+u+"document.F=Object"+o+"/script"+u),t.close(),a=t.F;r--;)delete a[c][i[r]];return a()};t.exports=Object.create||function(t,n){var e;return null!==t?(f[c]=r(t),e=new f,f[c]=null,e[u]=t):e=a(),void 0===n?e:o(e,n)}},function(t,n,e){var r=e(35),o=e(16).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,e){var r=e(2),o=e(3),i=e(45)(!1),u=e(21)("IE_PROTO");t.exports=function(t,n){var e,f=o(t),c=0,a=[];for(e in f)e!=u&&r(f,e)&&a.push(e);for(;n.length>c;)r(f,e=n[c++])&&(~i(a,e)||a.push(e));return a}},function(t,n,e){t.exports=e(5)},function(t,n,e){var r=e(15);t.exports=function(t){return Object(r(t))}},function(t,n,e){t.exports={default:e(41),__esModule:!0}},function(t,n,e){t.exports={default:e(42),__esModule:!0}},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var o=e(39),i=r(o),u=e(38),f=r(u),c="function"==typeof f.default&&"symbol"==typeof i.default?function(t){return typeof t}:function(t){return t&&"function"==typeof f.default&&t.constructor===f.default&&t!==f.default.prototype?"symbol":typeof t};n.default="function"==typeof f.default&&"symbol"===c(i.default)?function(t){return"undefined"==typeof t?"undefined":c(t)}:function(t){return t&&"function"==typeof f.default&&t.constructor===f.default&&t!==f.default.prototype?"symbol":"undefined"==typeof t?"undefined":c(t)}},function(t,n,e){e(65),e(63),e(66),e(67),t.exports=e(14).Symbol},function(t,n,e){e(64),e(68),t.exports=e(26).f("iterator")},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n){t.exports=function(){}},function(t,n,e){var r=e(3),o=e(61),i=e(60);t.exports=function(t){return function(n,e,u){var f,c=r(n),a=o(c.length),s=i(u,a);if(t&&e!=e){for(;a>s;)if(f=c[s++],f!=f)return!0}else for(;a>s;s++)if((t||s in c)&&c[s]===e)return t||s||0;return!t&&-1}}},function(t,n,e){var r=e(43);t.exports=function(t,n,e){if(r(t),void 0===n)return t;switch(e){case 1:return function(e){return t.call(n,e)};case 2:return function(e,r){return t.call(n,e,r)};case 3:return function(e,r,o){return t.call(n,e,r,o)}}return function(){return t.apply(n,arguments)}}},function(t,n,e){var r=e(9),o=e(34),i=e(19);t.exports=function(t){var n=r(t),e=o.f;if(e)for(var u,f=e(t),c=i.f,a=0;f.length>a;)c.call(t,u=f[a++])&&n.push(u);return n}},function(t,n,e){t.exports=e(1).document&&document.documentElement},function(t,n,e){var r=e(28);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,n,e){var r=e(28);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,n,e){"use strict";var r=e(32),o=e(12),i=e(20),u={};e(5)(u,e(7)("iterator"),function(){return this}),t.exports=function(t,n,e){t.prototype=r(u,{next:o(1,e)}),i(t,n+" Iterator")}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n,e){var r=e(9),o=e(3);t.exports=function(t,n){for(var e,i=o(t),u=r(i),f=u.length,c=0;f>c;)if(i[e=u[c++]]===n)return e}},function(t,n,e){var r=e(13)("meta"),o=e(11),i=e(2),u=e(6).f,f=0,c=Object.isExtensible||function(){return!0},a=!e(8)(function(){return c(Object.preventExtensions({}))}),s=function(t){u(t,r,{value:{i:"O"+ ++f,w:{}}})},l=function(t,n){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,r)){if(!c(t))return"F";if(!n)return"E";s(t)}return t[r].i},p=function(t,n){if(!i(t,r)){if(!c(t))return!0;if(!n)return!1;s(t)}return t[r].w},d=function(t){return a&&v.NEED&&c(t)&&!i(t,r)&&s(t),t},v=t.exports={KEY:r,NEED:!1,fastKey:l,getWeak:p,onFreeze:d}},function(t,n,e){var r=e(6),o=e(10),i=e(9);t.exports=e(4)?Object.defineProperties:function(t,n){o(t);for(var e,u=i(n),f=u.length,c=0;f>c;)r.f(t,e=u[c++],n[e]);return t}},function(t,n,e){var r=e(19),o=e(12),i=e(3),u=e(24),f=e(2),c=e(30),a=Object.getOwnPropertyDescriptor;n.f=e(4)?a:function(t,n){if(t=i(t),n=u(n,!0),c)try{return a(t,n)}catch(t){}if(f(t,n))return o(!r.f.call(t,n),t[n])}},function(t,n,e){var r=e(3),o=e(33).f,i={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],f=function(t){try{return o(t)}catch(t){return u.slice()}};t.exports.f=function(t){return u&&"[object Window]"==i.call(t)?f(t):o(r(t))}},function(t,n,e){var r=e(2),o=e(37),i=e(21)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n,e){var r=e(23),o=e(15);t.exports=function(t){return function(n,e){var i,u,f=String(o(n)),c=r(e),a=f.length;return c<0||c>=a?t?"":void 0:(i=f.charCodeAt(c),i<55296||i>56319||c+1===a||(u=f.charCodeAt(c+1))<56320||u>57343?t?f.charAt(c):i:t?f.slice(c,c+2):(i-55296<<10)+(u-56320)+65536)}}},function(t,n,e){var r=e(23),o=Math.max,i=Math.min;t.exports=function(t,n){return t=r(t),t<0?o(t+n,0):i(t,n)}},function(t,n,e){var r=e(23),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,n,e){"use strict";var r=e(44),o=e(52),i=e(17),u=e(3);t.exports=e(31)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,e=this._i++;return!t||e>=t.length?(this._t=void 0,o(1)):"keys"==n?o(0,e):"values"==n?o(0,t[e]):o(0,[e,t[e]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(t,n){},function(t,n,e){"use strict";var r=e(59)(!0);e(31)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,e=this._i;return e>=n.length?{value:void 0,done:!0}:(t=r(n,e),this._i+=t.length,{value:t,done:!1})})},function(t,n,e){"use strict";var r=e(1),o=e(2),i=e(4),u=e(27),f=e(36),c=e(54).KEY,a=e(8),s=e(22),l=e(20),p=e(13),d=e(7),v=e(26),y=e(25),h=e(53),b=e(47),x=e(50),m=e(10),g=e(3),w=e(24),O=e(12),S=e(32),_=e(57),j=e(56),P=e(6),E=e(9),M=j.f,A=P.f,T=_.f,L=r.Symbol,N=r.JSON,C=N&&N.stringify,k="prototype",F=d("_hidden"),q=d("toPrimitive"),I={}.propertyIsEnumerable,B=s("symbol-registry"),D=s("symbols"),W=s("op-symbols"),H=Object[k],K="function"==typeof L,R=r.QObject,J=!R||!R[k]||!R[k].findChild,U=i&&a(function(){return 7!=S(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a})?function(t,n,e){var r=M(H,n);r&&delete H[n],A(t,n,e),r&&t!==H&&A(H,n,r)}:A,G=function(t){var n=D[t]=S(L[k]);return n._k=t,n},$=K&&"symbol"==typeof L.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof L},z=function(t,n,e){return t===H&&z(W,n,e),m(t),n=w(n,!0),m(e),o(D,n)?(e.enumerable?(o(t,F)&&t[F][n]&&(t[F][n]=!1),e=S(e,{enumerable:O(0,!1)})):(o(t,F)||A(t,F,O(1,{})),t[F][n]=!0),U(t,n,e)):A(t,n,e)},Y=function(t,n){m(t);for(var e,r=b(n=g(n)),o=0,i=r.length;i>o;)z(t,e=r[o++],n[e]);return t},Q=function(t,n){return void 0===n?S(t):Y(S(t),n)},X=function(t){var n=I.call(this,t=w(t,!0));return!(this===H&&o(D,t)&&!o(W,t))&&(!(n||!o(this,t)||!o(D,t)||o(this,F)&&this[F][t])||n)},V=function(t,n){if(t=g(t),n=w(n,!0),t!==H||!o(D,n)||o(W,n)){var e=M(t,n);return!e||!o(D,n)||o(t,F)&&t[F][n]||(e.enumerable=!0),e}},Z=function(t){for(var n,e=T(g(t)),r=[],i=0;e.length>i;)o(D,n=e[i++])||n==F||n==c||r.push(n);return r},tt=function(t){for(var n,e=t===H,r=T(e?W:g(t)),i=[],u=0;r.length>u;)!o(D,n=r[u++])||e&&!o(H,n)||i.push(D[n]);return i};K||(L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var t=p(arguments.length>0?arguments[0]:void 0),n=function(e){this===H&&n.call(W,e),o(this,F)&&o(this[F],t)&&(this[F][t]=!1),U(this,t,O(1,e))};return i&&J&&U(H,t,{configurable:!0,set:n}),G(t)},f(L[k],"toString",function(){return this._k}),j.f=V,P.f=z,e(33).f=_.f=Z,e(19).f=X,e(34).f=tt,i&&!e(18)&&f(H,"propertyIsEnumerable",X,!0),v.f=function(t){return G(d(t))}),u(u.G+u.W+u.F*!K,{Symbol:L});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;nt.length>et;)d(nt[et++]);for(var nt=E(d.store),et=0;nt.length>et;)y(nt[et++]);u(u.S+u.F*!K,"Symbol",{for:function(t){return o(B,t+="")?B[t]:B[t]=L(t)},keyFor:function(t){if($(t))return h(B,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){J=!0},useSimple:function(){J=!1}}),u(u.S+u.F*!K,"Object",{create:Q,defineProperty:z,defineProperties:Y,getOwnPropertyDescriptor:V,getOwnPropertyNames:Z,getOwnPropertySymbols:tt}),N&&u(u.S+u.F*(!K||a(function(){var t=L();return"[null]"!=C([t])||"{}"!=C({a:t})||"{}"!=C(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!$(t)){for(var n,e,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);return n=r[1],"function"==typeof n&&(e=n),!e&&x(n)||(n=function(t,n){if(e&&(n=e.call(this,t,n)),!$(n))return n}),r[1]=n,C.apply(N,r)}}}),L[k][q]||e(5)(L[k],q,L[k].valueOf),l(L,"Symbol"),l(Math,"Math",!0),l(r.JSON,"JSON",!0)},function(t,n,e){e(25)("asyncIterator")},function(t,n,e){e(25)("observable")},function(t,n,e){e(62);for(var r=e(1),o=e(5),i=e(17),u=e(7)("toStringTag"),f=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],c=0;c<5;c++){var a=f[c],s=r[a],l=s&&s.prototype;l&&!l[u]&&o(l,u,a),i[a]=i.Array}},function(t,n){"use strict";var e={versions:function(){var t=window.navigator.userAgent;return{trident:t.indexOf("Trident")>-1,presto:t.indexOf("Presto")>-1,webKit:t.indexOf("AppleWebKit")>-1,gecko:t.indexOf("Gecko")>-1&&t.indexOf("KHTML")==-1,mobile:!!t.match(/AppleWebKit.*Mobile.*/),ios:!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:t.indexOf("Android")>-1||t.indexOf("Linux")>-1,iPhone:t.indexOf("iPhone")>-1||t.indexOf("Mac")>-1,iPad:t.indexOf("iPad")>-1,webApp:t.indexOf("Safari")==-1,weixin:t.indexOf("MicroMessenger")==-1}}()};t.exports=e},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var o=e(40),i=r(o),u=function(){function t(t,n,e){return n||e?String.fromCharCode(n||e):o[t]||t}function n(t){return l[t]}var e=/&quot;|&lt;|&gt;|&amp;|&nbsp;|&apos;|&#(\d+);|&#(\d+)/g,r=/['<> "&]/g,o={"&quot;":'"',"&lt;":"<","&gt;":">","&amp;":"&","&nbsp;":" "},f=/\u00a0/g,c=/<br\s*\/?>/gi,a=/\r?\n/g,s=/\s/g,l={};for(var p in o)l[o[p]]=p;return o["&apos;"]="'",l["'"]="&#39;",{encode:function(t){return t?(""+t).replace(r,n).replace(a,"<br/>").replace(s,"&nbsp;"):""},decode:function(n){return n?(""+n).replace(c,"\n").replace(e,t).replace(f," "):""},encodeBase16:function(t){if(!t)return t;t+="";for(var n=[],e=0,r=t.length;r>e;e++)n.push(t.charCodeAt(e).toString(16).toUpperCase());return n.join("")},encodeBase16forJSON:function(t){if(!t)return t;t=t.replace(/[\u4E00-\u9FBF]/gi,function(t){return escape(t).replace("%u","\\u")});for(var n=[],e=0,r=t.length;r>e;e++)n.push(t.charCodeAt(e).toString(16).toUpperCase());return n.join("")},decodeBase16:function(t){if(!t)return t;t+="";for(var n=[],e=0,r=t.length;r>e;e+=2)n.push(String.fromCharCode("0x"+t.slice(e,e+2)));return n.join("")},encodeObject:function(t){if(t instanceof Array)for(var n=0,e=t.length;e>n;n++)t[n]=u.encodeObject(t[n]);else if("object"==("undefined"==typeof t?"undefined":(0,i.default)(t)))for(var r in t)t[r]=u.encodeObject(t[r]);else if("string"==typeof t)return u.encode(t);return t},loadScript:function(t){var n=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(n),n.setAttribute("src",t)},addLoadEvent:function(t){var n=window.onload;"function"!=typeof window.onload?window.onload=t:window.onload=function(){n(),t()}}}}();t.exports=u},function(t,n){function e(t,n){t.classList?t.classList.add(n):t.className+=" "+n}t.exports=e},function(t,n){function e(t,n){if(t.classList)t.classList.remove(n);else{var e=new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi");t.className=t.className.replace(e," ")}}t.exports=e},,,function(t,n){"use strict";function e(){var t=document.querySelector("#page-nav");if(t&&!document.querySelector("#page-nav .extend.prev")&&(t.innerHTML='<a class="extend prev disabled" rel="prev">&laquo; Prev</a>'+t.innerHTML),t&&!document.querySelector("#page-nav .extend.next")&&(t.innerHTML=t.innerHTML+'<a class="extend next disabled" rel="next">Next &raquo;</a>'),yiliaConfig&&yiliaConfig.open_in_new){var n=document.querySelectorAll(".article-entry a:not(.article-more-a)");n.forEach(function(t){t.setAttribute("target","_blank")})}var e=document.querySelector("#js-aboutme");e&&0!==e.length&&(e.innerHTML=e.innerText)}t.exports={init:e}},,,,,,,,,function(t,n){function e(t,n){if("string"==typeof n)return t.insertAdjacentHTML("afterend",n);var e=t.nextSibling;return e?t.parentNode.insertBefore(n,e):t.parentNode.appendChild(n)}t.exports=e}])</script><script src="/./main.2d7529.js"></script><script>!function(){var e=function(e){var t=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(t),t.setAttribute("src",e)};e("/slider.885efe.js")}()</script>


<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


    
<div class="tools-col" q-class="show:isShow,hide:isShow|isFalse" q-on="click:stop(e)">
  <div class="tools-nav header-menu">
    
    
      
      
      
    
      
      
      
    
    

    <ul style="width: 70%">
    
    
      
      <li style="width: 50%" q-on="click: openSlider(e, 'innerArchive')"><a href="javascript:void(0)" q-class="active:innerArchive">Tag</a></li>
      
        
      
      <li style="width: 50%" q-on="click: openSlider(e, 'friends')"><a href="javascript:void(0)" q-class="active:friends">Friends</a></li>
      
        
    </ul>
  </div>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all" q-show="innerArchive">
        <div class="search-wrap">
          <input class="search-ipt" q-model="search" type="text" placeholder="find somethingâ€¦">
          <i class="icon-search icon" q-show="search|isEmptyStr"></i>
          <i class="icon-close icon" q-show="search|isNotEmptyStr" q-on="click:clearChose(e)"></i>
        </div>
        <div class="widget tagcloud search-tag">
          <p class="search-tag-wording">tag:</p>
          <label class="search-switch">
            <input type="checkbox" q-on="click:toggleTag(e)" q-attr="checked:showTags">
          </label>
          <ul class="article-tag-list" q-show="showTags">
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">Algorithm Problem</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">AWS</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">Algorithm</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">Architectural Pattern</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">Architecture</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">ArchitectureDesign</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">Nginx</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">Frontend</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">Cache</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">Browser</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">C#</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">Debug</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">Visual Studio</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">Cache System</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">Compile</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">Data Structure</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">JavaScript</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">Data Format</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">Database</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">Design Pattern</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">Distributed System</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">Microservices</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">Django</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">Redis</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">Docker</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">ELK</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">Format</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">Git</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">Version Control</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">Golang</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">HTTP</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">Network</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">Hardware</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">Interview</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">JQuery</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">Java EE</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">Software Testing</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">Java</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">Network Programming</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">LaTeX</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">Linux</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">Operating System</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">Linxu</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">Lock</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">macOS</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">Markdown</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">Lucene</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">Mattermost</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">MySQL</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">Netwok</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">Netwrok</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">Node.js</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">nvm</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">NPM</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">npm</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">OOP</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">OpenWrt</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">Operating Systems</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">Performancede</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">Performance</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">Programming</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">Protobuf</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">Python</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">RaspbeeryPi</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">Codis</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">SQL</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">Regular Expression</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">Security</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">Spring</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">TypeScript</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">VMware</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">Vmware</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">Windows</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">WordPress</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">VPN</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">hexo</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">ZooKeeper</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">iOS</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">hugo</a>
              </li>
            
            <div class="clearfix"></div>
          </ul>
        </div>
        <ul class="search-ul">
          <p q-show="jsonFail" style="padding: 20px; font-size: 12px;">
            ç¼ºå¤±æ¨¡å—ã€‚<br/>1ã€åœ¨åšå®¢æ ¹ç›®å½•ï¼ˆæ³¨æ„ä¸æ˜¯yiliaæ ¹ç›®å½•ï¼‰æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š<br/> npm i hexo-generator-json-content --save<br/><br/>
            2ã€åœ¨æ ¹ç›®å½•_config.ymlé‡Œæ·»åŠ é…ç½®ï¼š
<pre style="font-size: 12px;" q-show="jsonFail">
  jsonContent:
    meta: false
    pages: false
    posts:
      title: true
      date: true
      path: true
      text: true
      raw: false
      content: false
      slug: false
      updated: false
      comments: false
      link: false
      permalink: false
      excerpt: false
      categories: false
      tags: true
</pre>
          </p>
          <li class="search-li" q-repeat="items" q-show="isShow">
            <a q-attr="href:path|urlformat" class="search-title"><i class="icon-quo-left icon"></i><span q-text="title"></span></a>
            <p class="search-time">
              <i class="icon-calendar icon"></i>
              <span q-text="date|dateformat"></span>
            </p>
            <p class="search-tag">
              <i class="icon-price-tags icon"></i>
              <span q-repeat="tags" q-on="click:choseTag(e, name)" q-text="name|tagformat"></span>
            </p>
          </li>
        </ul>
    	</section>
    

    
    	<section class="tools-section tools-section-friends" q-show="friends">
  		
        <ul class="search-ul">
          
            <li class="search-li">
              <a href="http://swsmile.info/en/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>My English Blog</a>
            </li>
          
            <li class="search-li">
              <a href="http://swsmile.info/oj/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>My OJ Blog</a>
            </li>
          
            <li class="search-li">
              <a href="http://swsmile.info/gym/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>è¥¿ç»´èœ€é»çš„å¥èº« Blog</a>
            </li>
          
        </ul>
  		
    	</section>
    

    
  </div>
  
</div>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config("");
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->



</body>
</html>